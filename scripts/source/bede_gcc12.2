#!/bin/bash

module purge

module load gcc/12.2 
module load openmpi/4.0.5 
module load cuda/12.0.1 
module load openblas/0.3.10 
module load hdf5/1.10.7

export NVCCFLAGS_ADD='-gencode arch=compute_70,code=sm_70'

export OPP=/users/csrcnl/phd/OP-PIC
export OPP_INSTALL_PATH=$OPP/opp_install
export OPP_TRANSLATOR=$OPP/opp_translator/translator
export OPP_PATH=$OPP/opp_lib

export PETSC_INSTALL_PATH=/users/csrcnl/lib_install/petsc-3.20.1_rel
export LD_LIBRARY_PATH=$PETSC_INSTALL_PATH/lib:$LD_LIBRARY_PATH

alias nv='nvidia-smi -l 1'

export PATH=/users/csrcnl/lib_install/Python-3.12.3/bin:$PATH
# export PATH=/users/csrcnl/lib_install/Python-3.10.14/bin:$PATH
source $OPP/opp_translator/opp_venv/bin/activate

# export LIBCLANG_PATH=/opt/llvm/14.0.6/lib/libclang.so

# In makefiles -------------------------------------------------------

# for ibm-power9 use  "-mcpu=native" instead of "-march=native"

# for grace-hopper use "-mcpu=neoverse-v1" instead of "-march=native"
# also, export NVCCFLAGS_ADD='-gencode arch=compute_90,code=sm_90'
# Tested with modules gcc/12.2, cuda/12.3.2, openmpi/4.1.6